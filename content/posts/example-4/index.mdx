---
title:  Simple fast animation
description: Falling balls live animation using event handlers
date: "2024-12-24"
author: "JerryI"
tags: ["animation"]
---

{/* add this script to the body  */}
{/* https://cdn.jsdelivr.net/gh/WLJSTeam/web-components@latest/src/common/app.js */}
<wljs-store kernel="./attachments/kernel-714215149096084936.txt" json="./attachments/ba3486d8-a722-4fa9-9274-6eeed98b520e.txt"></wljs-store>




# Simple fast animation
Falling balls

<wljs-editor display="codemirror" type="Input"  >{String.raw`balls = RandomReal[{-1,1}, {300,3}];
vels  = RandomReal[{-1,1}, {300,3}];

Graphics3D[{
  Table[With[{i = i},
    {
      RGBColor[RandomReal[{0,1}, 3]],
      Sphere[balls[[i]] // Offload, 0.03]
    }
  ], {i, Length[balls]}], 
  EventHandler[AnimationFrameListener[balls // Offload], updateFunction]
}]`}</wljs-editor>

<wljs-editor display="codemirror" type="Output"  >{String.raw`(*VB[*)(FrontEndRef["138df528-eb27-45c4-9734-0996e11de8e2"])(*,*)(*"1:eJxTTMoPSmNkYGAoZgESHvk5KRCeEJBwK8rPK3HNS3GtSE0uLUlMykkNVgEKGxpbpKSZGlnopiYZmeuamCab6FqaG5voGlhamqUaGqakWqQaAQB5/BUm"*)(*]VB*)`}</wljs-editor>

Update function

<wljs-editor display="codemirror" type="Input"  >{String.raw`updateFunction = Function[Null,
  vels = Table[
    If[Norm[balls[[i]]] < 0.01, -1, 1] vels[[i]] - 0.08 balls[[i]]
  , {i, Length[balls]}];
  
  balls = Table[balls[[i]] + 0.08 vels[[i]], {i, Length[balls]}];
];`}</wljs-editor>

Kickstart

<wljs-editor display="codemirror" type="Input"  >{String.raw`updateFunction[];`}</wljs-editor>